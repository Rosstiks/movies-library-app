(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{103:function(e,t,n){},105:function(e,t,n){},106:function(e,t,n){},107:function(e,t,n){},108:function(e,t,n){},178:function(e,t,n){},179:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(24),c=n.n(i),s=(n(102),n(103),n(20)),o=n.n(s),u=n(35),v=n(7),l=n(9),m=n(11),p=n(10),d=n(182),h=function e(){var t=this;Object(v.a)(this,e),this._apiKey="api_key=b7473b579abba0475a9336164324a2c1",this._apiBase="https://api.themoviedb.org/3",this.requestFromDB=function(){var e=Object(u.a)(o.a.mark((function e(n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t._apiBase).concat(n));case 2:return r=e.sent,e.next=5,r.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.searchMovies=function(){var e=Object(u.a)(o.a.mark((function e(n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.requestFromDB("/search/movie?".concat(t._apiKey,"&query=").concat(n));case 2:return r=e.sent,e.abrupt("return",r.results);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getActualGenresList=Object(u.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.requestFromDB("/genre/movie/list?".concat(t._apiKey));case 2:return n=e.sent,e.abrupt("return",n.genres);case 4:case"end":return e.stop()}}),e)})))},j=(n(105),n(1)),f=n(187),b=n(186),O=(n(106),n(19)),x=n(185),_=(n(107),n(108),n(6));function g(e){var t=e.poster,n=e.vote,r=e.title,a=e.date,i=e.genres.map((function(e){return Object(_.jsx)("span",{className:"movie-item__genres-item",children:e.name},e.id)}));return Object(_.jsxs)("header",{className:"movie-item__header",children:[Object(_.jsx)("img",{className:"movie-item__poster",src:t,alt:"Movie poster"}),Object(_.jsxs)("div",{className:"movie-item__header-content",children:[Object(_.jsx)("div",{className:"movie-item__vote-container",children:Object(_.jsx)("span",{className:"movie-item__vote",children:n})}),Object(_.jsx)("h3",{className:"movie-item__title",children:r}),Object(_.jsx)("div",{className:"movie-item__date",children:a}),Object(_.jsx)("div",{className:"movie-item__genres-container",children:i})]})]})}g.defaultProps={genres:["No info"],vote:0};var y=g;var w=["overview","popularity","id"],N=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){!function(e){for(var t=document.getElementById(e);t.scrollHeight>t.clientHeight;){var n=t.textContent.lastIndexOf(" ");t.textContent="".concat(t.textContent.slice(0,n),"...")}}(this.props.id)}},{key:"render",value:function(){var e=this.props,t=e.overview,n=e.popularity,r=e.id,a=Object(O.a)(e,w);return Object(_.jsxs)("div",{className:"movie-item",children:[Object(_.jsx)(y,Object(j.a)({},a)),Object(_.jsxs)("p",{id:r,className:"movie-item__overview",children:[t," "]}),Object(_.jsx)("footer",{className:"movie-item__footer",children:Object(_.jsx)(x.a,{defaultValue:n,allowHalf:!0,count:10,style:{fontSize:"1.3em",verticalAlign:"middle",lineHeight:"46px"}})})]})}}]),n}(a.a.Component);N.defaultProps={popularity:0,overview:"Overview not found"};var k=function(e){var t=e.movies.map((function(e){var t=e.id;return Object(_.jsx)(f.a,{xs:{span:24},lg:{span:12},children:Object(_.jsx)(N,Object(j.a)({},e))},t)}));return Object(_.jsx)(b.a,{gutter:[36,36],children:t})},D=n(183);n(178);var M=function(){return Object(_.jsx)("header",{className:"header",children:Object(_.jsx)(D.a,{placeholder:"Type to search..."})})},B=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(v.a)(this,n),(r=t.call(this,e)).movieDBService=new h,r.state={movies:[]},r.getMoviesData("return"),r}return Object(l.a)(n,[{key:"getMoviesData",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r,a,i,c=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.movieDBService.getActualGenresList();case 2:return n=e.sent,r={},n.forEach((function(e){r[e.id]=e.name})),e.next=7,this.movieDBService.searchMovies(t);case 7:a=e.sent,i=a.map((function(e){return c.createDataMovie(e,r)})),this.setState({movies:i});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createDataMovie",value:function(e,t){var n=e.genre_ids.map((function(e){return{id:e,name:t[e]}}));return{id:e.id,title:e.title,overview:e.overview,date:Object(d.a)(new Date(e.release_date),"MMM d, y"),poster:"https://image.tmdb.org/t/p/w500".concat(e.poster_path),genres:n,vote:e.vote_average,popularity:Math.trunc(e.popularity)/10}}},{key:"render",value:function(){var e=this.state.movies;return Object(_.jsxs)("div",{className:"container",children:[Object(_.jsx)(M,{}),Object(_.jsx)(k,{movies:e})]})}}]),n}(a.a.Component),C=B;c.a.render(Object(_.jsx)(C,{}),document.getElementById("root"))}},[[179,1,2]]]);
//# sourceMappingURL=main.8a84f110.chunk.js.map